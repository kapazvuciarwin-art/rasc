# 溫濕度顯示問題說明

## 目前狀況

### ✅ CO2 數據
- **狀態**: 正常運作
- **更新頻率**: 約每 5 秒（透過 BLE 通知）
- **特徵值**: `00007001-b38d-4985-720e-0f993a68ee41`
- **格式**: 2 bytes, little-endian

### ⚠️ 溫度數據
- **狀態**: 已找到數據格式，但需要確認讀取
- **特徵值**: `00007003-b38d-4985-720e-0f993a68ee41`
- **格式**: bytes 0-2 (big-endian) / 100 = 溫度值
- **問題**: 該特徵值不支持通知，需要定期讀取
- **已實現**: 每 30 秒主動讀取一次

### ❌ 濕度數據
- **狀態**: MyCO2 設備可能沒有濕度感測器
- **說明**: 從設備規格和實際讀取來看，MyCO2 主要監測 CO2 和溫度

## 數據更新機制

### 背景更新頻率

1. **CO2 數據**:
   - **主要方式**: BLE 通知（實時推送）
   - **備份方式**: 每 30 秒主動讀取一次
   - **實際頻率**: 約每 5 秒更新一次（取決於設備推送頻率）

2. **溫度數據**:
   - **方式**: 每 30 秒主動讀取一次（因為不支持通知）
   - **頻率**: 每 30 秒更新一次

3. **濕度數據**:
   - **狀態**: 設備不支持

### 資料庫記錄
- 所有讀數都會自動保存到 `myco2_data.db`
- 包含時間戳記、CO2、溫度、RSSI 等

## 改進計劃

1. ✅ 已實現定期讀取機制（每30秒）
2. ✅ 已修正溫度數據解析格式
3. ⏳ 需要確認設備連接狀態和數據讀取

## 檢查方法

```bash
# 檢查資料庫中的數據
cd /home/kapraspi/rasc
source venv/bin/activate
python3 check_data.py

# 查看服務日誌
journalctl --user -u rasc.service -f
```
